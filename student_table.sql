-- STUDENT_PERFORMANCE
CREATE TABLE STUDENT_PERFORMANCE (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    STUDENT_ID VARCHAR2(50) UNIQUE,
    NAME VARCHAR2(100),
    PROGRAM VARCHAR2(50),
    GPA NUMBER,
    ATTENDANCE_RATE NUMBER,
    LMS_SCORE NUMBER,
    LAST_LOGIN_DAYS NUMBER,
    EMBEDDING VECTOR(384, *),
    CURRENT_SKILLS CLOB,
    TARGET_CAREER VARCHAR2(100)
);

-- MODULES
CREATE TABLE MODULES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MODULE_ID VARCHAR2(10) UNIQUE,
    MODULE_NAME VARCHAR2(200),
    PROGRAM VARCHAR2(100)
);

-- MODULE_SKILLS
CREATE TABLE MODULE_SKILLS (
    MODULE_ID VARCHAR2(10),
    SKILL_NAME VARCHAR2(100),
    PRIMARY KEY(MODULE_ID, SKILL_NAME),
    FOREIGN KEY(MODULE_ID) REFERENCES MODULES(MODULE_ID),
    FOREIGN KEY(SKILL_NAME) REFERENCES SKILLS(SKILL_NAME)
);

-- SKILLS
CREATE TABLE SKILLS (
    SKILL_ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SKILL_NAME VARCHAR2(100) UNIQUE
);

-- STUDENT_MODULES
CREATE TABLE STUDENT_MODULES (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    STUDENT_ID VARCHAR2(50),
    MODULE_ID VARCHAR2(10),
    COMPLETION_DATE DATE,
    GRADE VARCHAR2(5),
    FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT_PERFORMANCE(STUDENT_ID),
    FOREIGN KEY(MODULE_ID) REFERENCES MODULES(MODULE_ID)
);

-- STUDENT_SKILLS
CREATE TABLE STUDENT_SKILLS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    STUDENT_ID VARCHAR2(50),
    SKILL_NAME VARCHAR2(100),
    SKILL_LEVEL VARCHAR2(50),
    DATE_ACQUIRED DATE,
    FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT_PERFORMANCE(STUDENT_ID)
);
